{
  "hash": "6005e7d957eb2f5ccb031aa77d21736e",
  "result": {
    "markdown": "---\ntitle: \"Como construir gráficos para artigo técnico \"\nauthor: \"Marcelo Carvalho dos Anjos\"\ndate: \"2022-09-28\"\ncategories: [Exploração, Comunicação]\nimage: \"chart_title.png\"\n---\n\n\n::: {.callout-tip appearance=\"simple\"}\nVídeo tema para este post em [Como construir gráficos para artigo técnico](https://youtu.be/h-touCMsiYQ){target=\"_blank\"}\n:::\n\n### {{< fa 1 >}} [**O que é um gráfico**]{style=\"color: #5AC8BE ;\"}\n\n-   Um meio eficiente de representação e comunicação de dados e pode conter uma quantidade de significativa de informação.\n\n-   Formato visual de representação de dados que é interpretado em grande velocidade pelo cerebro e que permite ações ou decisões mais rápidas.\n\n![Alguns tipos de gráficos](chart_types.png){width=\"1390\"}\n\n### {{< fa 2 >}} [**Qual o objetivo**]{style=\"color: #5AC8BE ;\"}\n\n-   Facilitar a identificação de padrões, tendências e discrepancias nos dados transformando em informações.\n\n-   Permitir ações imediatas ou gerar informação complementar para que ações possam ser tomadas posteriormente.\n\n### {{< fa 3 >}} [**De onde vem a demanda**]{style=\"color: #5AC8BE ;\"}\n\n-   Necessidade de representação de dados que potencialize o desenvolvimento de estratégias e ações.\n\n-   Necessidade de algo que fortaleça o argumento em um estudo ou pesquisa.\n\n### {{< fa 4 >}} [**Como fazer**]{style=\"color: #5AC8BE ;\"}\n\nPara reproduzir os códigos abaixo serão necessários os pacotes [tidyverse](https://www.tidyverse.org/){target=\"_blank\"} , [ggpmisc](https://github.com/aphalo/ggpmisc/){target=\"_blank\"}, [janitor](https://github.com/sfirke/janitor){target=\"_blank\"}, [qcc](https://luca-scr.github.io/qcc/articles/qcc.html){target=\"_blank\"}, [ggpubr](http://rpkgs.datanovia.com/ggpubr/index.html){target=\"_blank\"}, [ggQC](http://rcontrolcharts.com/){target=\"_blank\"}, [quantmod](https://www.quantmod.com/){target=\"_blank\"} e [ggalluvial](https://cran.r-project.org/web/packages/ggalluvial/vignettes/ggalluvial.html){target=\"_blank\"}\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(ggpubr)\nlibrary(ggpmisc)\nlibrary(qcc)\nlibrary(ggQC)\nlibrary(quantmod)\nlibrary(easyalluvial)\n```\n:::\n\n\nGráfico de comparação\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngroup_compar1 <- \n  list(c(\"4\",\"6\"),\n       c(\"6\",\"8\"),\n       c(\"4\",\"8\"))\n\nmtcars %>% \n  ggboxplot(x = \"cyl\",\n            y= \"mpg\",\n            fill = \"cyl\",\n            palette = \"uchicago\")+\n  stat_compare_means(comparisons = group_compar1)\n```\n\n::: {.cell-output-display}\n![](plot_stats_files/figure-html/unnamed-chunk-2-1.png){width=672}\n:::\n:::\n\n\nPlotando estatístics no corpo do gráfico.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmtcars %>% \n  ggplot(aes(x = wt, y = mpg))+\n  geom_point()+\n  stat_fit_tb(method = \"lm\",\n              label.x = \"right\",\n              method.args = list(formula = y~x),\n              table.theme = ttheme_gtdark())\n```\n\n::: {.cell-output-display}\n![](plot_stats_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n:::\n\n\nPlotando fórmulas no corpo do gráfico.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmtcars %>% \n  ggplot(aes(x = wt, y = mpg))+\n  geom_point()+\n  stat_correlation(use_label(c(\"r\", \"t\", \"p\")),\n                   label.x = \"right\")\n```\n\n::: {.cell-output-display}\n![](plot_stats_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n:::\n\n\nPlotando dados no corpo do gráfico.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntbl_median_mtcars <- \n  mtcars %>% \n  select(mpg, hp, cyl) %>% \n  group_by(cyl) %>% \n  summarise(across(where(is.numeric), median)) %>% \n  ungroup()\n\ndata_trans_mtcars <- tibble(x = 5.40, y = 34, tb = list(tbl_median_mtcars))\n\nmtcars %>% \n  ggplot(aes(x = wt, y = mpg, color = factor(cyl)))+\n  geom_point()+\n  geom_table(data= data_trans_mtcars, aes(x=x, y=y, label = tb))\n```\n\n::: {.cell-output-display}\n![](plot_stats_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n:::\n\n\nGráfico de cause efeito.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nqcc::cause.and.effect(\n  cause = list(\n    medida = c(\"metrica errada\"),\n    maquin = c(\"defeito\"),\n    metodo = c(\"treinamento\")\n      ),\n  effect = \"efeito\"\n)\n```\n\n::: {.cell-output-display}\n![](plot_stats_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n\n\nModelo para auxiliar na escolha de gráfico de controle.\n\n\n```{mermaid}\n%%| warning: false\n%%| echo: false\n%%| fig-width: 6.5\nflowchart LR\n    A[dados] -->B{qual tipo \\n de dados?}\n    B -->C[Contínuo]\n    B -->D[Discreta/\\nAtributos]\n    C -->E{Qual o volume\\n de dados ?}\n    E -->|n = 1|F[x.one + R]\n    E -->|n 2-10|G[x + R]\n    E -->|n > 10|H[x + S]\n    D -->I{Lote de dados\\n constante ?}\n    I-->J[Sim]\n    I-->K[Não]\n    J-->L[C Proporção de \\ndefeitos por UN]\n    J-->M[NP Contagem de \\ndefeitos por UN]\n    K-->N[U Contagem de \\ndefeitos por UN]\n    K-->O[P Proporção de \\ndefeitos por UN]\n```\n\n\nGráfico X bar de controle de processo.\n\n\n::: {.cell output-location='column'}\n\n```{.r .cell-code}\ndata(\"pistonrings\")\n\ndata_pistonring <- as_tibble(pistonrings)\n\nqcc(data_pistonring$diameter,\n                type = \"xbar.one\",\n                rules = shewhart.rules)\n```\n\n::: {.cell-output-display}\n![](plot_stats_files/figure-html/unnamed-chunk-8-1.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n```\nList of 11\n $ call      : language qcc(data = data_pistonring$diameter, type = \"xbar.one\", rules = shewhart.rules)\n $ type      : chr \"xbar.one\"\n $ data.name : chr \"data_pistonring$diameter\"\n $ data      : num [1:200, 1] 74 74 74 74 74 ...\n  ..- attr(*, \"dimnames\")=List of 2\n $ statistics: Named num [1:200] 74 74 74 74 74 ...\n  ..- attr(*, \"names\")= chr [1:200] \"1\" \"2\" \"3\" \"4\" ...\n $ sizes     : int [1:200] 1 1 1 1 1 1 1 1 1 1 ...\n $ center    : num 74\n $ std.dev   : num 0.01\n $ nsigmas   : num 3\n $ limits    : num [1, 1:2] 74 74\n  ..- attr(*, \"dimnames\")=List of 2\n $ violations:List of 2\n - attr(*, \"class\")= chr \"qcc\"\n```\n:::\n:::\n\n\nGráfico de pareto.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndata_defeito <- \n  tribble(~\"tipo\", ~\"qtd\", ~\"custo\",\n          \"riscos\", 201, 4287.60,\n          \"Manchas\",78,2423.46,\n          \"Dobras\",47,1118.60,\n          \"Furos\",31,8946.60,\n          \"Rasgos\",15,1864.05)\n\npareto_defeito <- \n  data_defeito %>% \n  ggplot(aes(x = tipo, y= qtd))+\n  stat_pareto(bars.fill = \"lightblue\")\n\npareto_custo <- \n  data_defeito %>% \n  ggplot(aes(x = tipo, y= custo))+\n  stat_pareto(bars.fill = \"navy\")\n\ndata_defeito %>% \n  ggplot(aes(x = tipo, y = custo))+\n  stat_pareto(bars.fill = \"navy\")+\n  annotate(\"plot_npc\", \n            npcx = \"right\", \n            npcy = \"middle\",\n            label =pareto_defeito )\n```\n\n::: {.cell-output-display}\n![](plot_stats_files/figure-html/unnamed-chunk-9-1.png){width=960}\n:::\n:::\n\n\nGráfico de sentimento candlestick chart.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngetSymbols(\"MORTGAGE30US\", src= \"FRED\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"MORTGAGE30US\"\n```\n:::\n\n```{.r .cell-code}\nchart_Series(MORTGAGE30US)\n```\n\n::: {.cell-output-display}\n![](plot_stats_files/figure-html/unnamed-chunk-10-1.png){width=672}\n:::\n\n```{.r .cell-code}\ngetSymbols(\"VIXCLS\", src= \"FRED\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"VIXCLS\"\n```\n:::\n\n```{.r .cell-code}\nchart_Series(VIXCLS)\n```\n\n::: {.cell-output-display}\n![](plot_stats_files/figure-html/unnamed-chunk-10-2.png){width=672}\n:::\n\n```{.r .cell-code}\ngetSymbols(\"DGS10\", src= \"FRED\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"DGS10\"\n```\n:::\n\n```{.r .cell-code}\nchart_Series(DGS10)\n```\n\n::: {.cell-output-display}\n![](plot_stats_files/figure-html/unnamed-chunk-10-3.png){width=672}\n:::\n\n```{.r .cell-code}\ngetSymbols(\"VALE\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"VALE\"\n```\n:::\n\n```{.r .cell-code}\nchartSeries(VALE)\n```\n\n::: {.cell-output-display}\n![](plot_stats_files/figure-html/unnamed-chunk-10-4.png){width=672}\n:::\n:::\n\n\nGráfico de análise multidimensional Alluvial.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nplot_mtcars <- \n  mtcars %>% \n  alluvial_wide(max_variables = 5) \n  \nadd_marginal_histograms(plot_mtcars, mtcars)\n```\n\n::: {.cell-output-display}\n![](plot_stats_files/figure-html/unnamed-chunk-11-1.png){width=672}\n:::\n:::\n\n\nGráfico PCA\n\n\n::: {.cell}\n\n```{.r .cell-code}\niris %>% \n  select(-Species) %>% \n  prcomp(center = TRUE, scale. = TRUE) %>% \n  factoextra::fviz_pca_biplot(geom.ind = \"point\",\n                              habillage = iris$Species,\n                              addEllipses = TRUE)\n```\n\n::: {.cell-output-display}\n![](plot_stats_files/figure-html/unnamed-chunk-12-1.png){width=672}\n:::\n:::\n\n\n\n### {{< fa 5 >}} [**Pra onde vai quem é o cliente**]{style=\"color: #5AC8BE ;\"}\n\n-   Etapas de analise de resultados, validação, modelagem ou comunicação.\n\n-   Inclusão em documento técnico reproduzível.\n\n-   Comunicação de descobertas ou resultados de trabalhos técnicos\n\n-   Documentação ou treinamento de pessoal.\n\n### {{< fa 6 >}} [**Qual o resultado**]{style=\"color: #5AC8BE ;\"}\n\n-   Aperfeiçoar as técnicas de representação, exploração e comunicação de estudos técnicos.\n\n-   Facilitar o entendimento das informações contidas nos documentos técnicos poupando tempo e dinheiro, permitindo a replicação e experimentos e consequentemente busca por melhoria.\n\n-   Facilitar o reconhecimento de registros, estudos, descobertas em pesquisas futuras.\n",
    "supporting": [
      "plot_stats_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}