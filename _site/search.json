[
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "Info",
    "section": "",
    "text": "Education\nNova Acrópole | Florianópolis, SC, Brasil\nFilosofia na tradição Clássica | 2014-2015\nUniversidade Uniderp | Campo Grande, MS, Brasil\nMestrado Produção e Gestão Agroindustrial | 2008-2010"
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Carvalho Ribeiro Blog",
    "section": "",
    "text": "Order By\n       Default\n         \n          Title\n        \n         \n          Date - Oldest\n        \n         \n          Date - Newest\n        \n         \n          Author\n        \n     \n  \n    \n      \n      \n    \n\n\n\n\n  \n\n\n\n\n\n\n\n\n\n\nModelos\n\n\n\n\n\n\n\n\n\n\n\nAug 3, 2022\n\n\nMarcelo Carvalho dos Anjos\n\n\n\n\n\n\n  \n\n\n\n\n\n\n\n\n\n\nDemanda\n\n\nDados\n\n\nFerramentas\n\n\nExploração\n\n\nModelos\n\n\nVersionamento\n\n\nComunicação\n\n\nAplicação\n\n\n\n\n\n\n\n\n\n\n\nAug 3, 2022\n\n\nMarcelo Carvalho dos Anjos\n\n\n\n\n\n\nNo matching items"
  },
  {
    "objectID": "posts/post-with-code/index.html",
    "href": "posts/post-with-code/index.html",
    "title": "Avaliar resultados de modelo preditivo com matriz de confusão",
    "section": "",
    "text": "Qual o objetivo\n\nPor ser visual ajuda a responder rapidamente será que meu modelo teve um bom desempenho, onde deu errado, como posso corrigir ?\nAs diversas saídas de previõe permite a criação de indicadores que serão uteis nos ajustes mais adequados conforme a necessidade do trabalho que está sendo desenvolvido.\n\n\n\nDe onde vem a demanda\n\nEm 1904 Karl Pearson criou a tabela de contingência. Por que precisamos e uma matriz de confusao se tevem a acuracidade ?\nImagine prever quantas pessoas estao infectadas com um virus contagioso antes de apresentar sintomas e isola-las da populacao saudavel.\n\n\n\nComo fazer\nPara reproduzir os códigos abaixo serão necessários os pacotes tidyverse , tidymodels e janitor\nO principal pacote que será usando para analisar uma matriz de confusão é o pacote yardstick que já é carregado quando chamamos o pacote tidymodels.\n\n#packages\nlibrary(tidyverse)\nlibrary(tidymodels)\n\n#check\ntwo_class_example %>% filter(Class1 >0.5) %>% janitor::tabyl(truth)\n\n  truth   n   percent\n Class1 227 0.8194946\n Class2  50 0.1805054\n\n#exemplo de tabela cruzada usando janitor\ntwo_class_example %>% \n  janitor::tabyl(truth, predicted) %>% \n  janitor::adorn_totals(where = c(\"col\", \"row\")) %>% \n  janitor::adorn_title()\n\n        predicted             \n  truth    Class1 Class2 Total\n Class1       227     31   258\n Class2        50    192   242\n  Total       277    223   500\n\n#trocando nomes\ntwo_class_example %>% \n  conf_mat(truth =truth, estimate =predicted, dnn =c(\"vlr_previsto\",\"vlr_real\"))\n\n            vlr_real\nvlr_previsto Class1 Class2\n      Class1    227     50\n      Class2     31    192\n\n#plot heatmap\ntwo_class_example %>% \n  conf_mat(truth = truth, estimate = predicted) %>% \n  autoplot(type = \"heatmap\")\n\n\n\n#acuracia- prop de acertos do modelo total de acerto / total previu\ntwo_class_example %>% \n  accuracy(truth= truth, estimate = predicted)\n\n# A tibble: 1 × 3\n  .metric  .estimator .estimate\n  <chr>    <chr>          <dbl>\n1 accuracy binary         0.838\n\n#sensibilidade ou recall é a proporção de casos positivos classif corretamente\n#Raio X de aeroporto prioriza sensitivity\n#diagnóstico de cancer também pois o não diagnóstico resulta em atraso no tratamento\ntwo_class_example %>% \n  yardstick::sens(truth= truth, estimate = predicted)\n\n# A tibble: 1 × 3\n  .metric .estimator .estimate\n  <chr>   <chr>          <dbl>\n1 sens    binary         0.880\n\n#Recall métrica útil nos casos em que o Falso Negativo supera o falso positivol\n#importante em casos médicos em que não importa se disparamos um alarme \n#falso, mas os casos positivos reais não devem passar despercebidos!\n#Em nosso exemplo, Recall seria uma métrica melhor porque não queremos dar alta \n#acidentalmente a uma pessoa infectada e deixá-la se misturar com a população \n#saudável,espalhando o vírus contagioso. \n#Agora você pode entender por que a acuracidade foi uma métrica ruim para modelo.\ntwo_class_example %>% \n  yardstick::recall(truth= truth, estimate = predicted)\n\n# A tibble: 1 × 3\n  .metric .estimator .estimate\n  <chr>   <chr>          <dbl>\n1 recall  binary         0.880\n\n#kappa\ntwo_class_example %>% \n  yardstick::kap(truth= truth, estimate = predicted)\n\n# A tibble: 1 × 3\n  .metric .estimator .estimate\n  <chr>   <chr>          <dbl>\n1 kap     binary         0.675\n\n#npv\ntwo_class_example %>% \n  yardstick::npv(truth= truth, estimate = predicted)\n\n# A tibble: 1 × 3\n  .metric .estimator .estimate\n  <chr>   <chr>          <dbl>\n1 npv     binary         0.861\n\n#ppv\ntwo_class_example %>% \n  yardstick::ppv(truth= truth, estimate = predicted)\n\n# A tibble: 1 × 3\n  .metric .estimator .estimate\n  <chr>   <chr>          <dbl>\n1 ppv     binary         0.819\n\n#A precisão é util nos casos em que os falsos positivos são uma preocupação \n#maior do que os falsos negativos.\n#A precisão é importante em sistemas de recomendação de música ou vídeo, \n#sites de comércio eletrônico, etc. Resultados errados podem levar à perda de \n#clientes e prejudicar o negócio.\ntwo_class_example %>% \n  yardstick::precision(truth= truth, estimate = predicted)\n\n# A tibble: 1 × 3\n  .metric   .estimator .estimate\n  <chr>     <chr>          <dbl>\n1 precision binary         0.819\n\n#spec\ntwo_class_example %>% \n  yardstick::spec(truth= truth, estimate = predicted)\n\n# A tibble: 1 × 3\n  .metric .estimator .estimate\n  <chr>   <chr>          <dbl>\n1 spec    binary         0.793\n\n#roc_curve\ntwo_class_example %>% \n  roc_curve(truth = truth, estimate = Class1 ) %>% autoplot()\n\n\n\n#roc_auc\ntwo_class_example %>% \n  roc_auc(truth = truth, estimate = Class1 )\n\n# A tibble: 1 × 3\n  .metric .estimator .estimate\n  <chr>   <chr>          <dbl>\n1 roc_auc binary         0.939\n\n\n\n\n\n\n\n\nDiferença entre incidência e prevalencia\n\n\n\n\n\nIncidencia é o número de casos recém-diagnosticados de uma doença. Número de novos casos de uma doença dividido pelo número de pessoas em risco para a doença. Se, ao longo de um ano, cinco mulheres são diagnosticadas com câncer de mama, de uma população total de 200 mulheres do estudo (que não têm câncer de mama no início do período de estudo), então diríamos que a incidência de câncer de mama câncer nesta população foi de 0,025. (ou 2.500 por 100.000 mulheres-anos de estudo)\nPrevalência é o número total de casos da doença existentes em uma população. A taxa de prevalência é o número total de casos de uma doença existente em uma população dividido pela população total. Assim, se uma medida de câncer é feita em uma população de 40.000 pessoas e 1.200 foram recentemente diagnosticadas com câncer e 3.500 estão vivendo com câncer, então a prevalência de câncer é de 0,118. (ou 11.750 por 100.000 pessoas)\n\n\n\n\n\nPra onde vai quem é o cliente\n\nA próxima etapa é o ajuste, finalização e comunicação do modelo.\n\n\n\nQual o resultado\n\nAperfeiçoar as técnicas de avaliação de performance de modelos poupando tempo e dinheiro.\nFacilitar o processo de busca por melhorias nos modelos de previsão.\nMelhorar a comunicação dos resultados."
  },
  {
    "objectID": "posts/welcome/index.html",
    "href": "posts/welcome/index.html",
    "title": "Motivação para o blog",
    "section": "",
    "text": "Em 2040 o Brasil terá uma população mais urbana e mais madura. A necessidade de aumento de produtividade no país estará em rota de colisão com a demanda por mão de obra qualificada em países desenvolvidos que estarão com suas populações diminuindo.\nO objetivo do canal é tentar auxiliar na melhoria de processos pra quando chegarmos lá, que estejamos preparados."
  },
  {
    "objectID": "posts/welcome/index.html#como-serão-divididos-os-tópicos",
    "href": "posts/welcome/index.html#como-serão-divididos-os-tópicos",
    "title": "Motivação para o blog",
    "section": "Como serão divididos os tópicos ?",
    "text": "Como serão divididos os tópicos ?\n\nDemanda, definição do problema, objetivos e métricas de sucesso - Contém a origem e tipos de necessidade que é o que torna todo o restante do trabalho necessário.\nDados - Contém conceitos com o objetivo de estimular a observação, abstração e entendimento sobre o que são dados.\nFerramentas - Contém ferramentas como R(RStudio), Oracle SQL*plus, Oracle SNO, SPSS, Sphinx, Qlikview, PowerBI e excel.\nExploração - Contém visualização de dados, análise exploratória, tabelas, queries, planilhas de excel, folhas de verificação etc.\nModelos - Contém alguns tipos de modelos descritivos, preditivos, inferenciais, otimização entre outros.\nVersionamento e Reprodutibilidade - Contém processos para desenvolvimento de documentos reproduzíveis usando versionamento github, git, criação de documentos quarto_pub e rmardown, criação de livros bookdown entre outros.\nComunicação - Contém abordagens sobre comunicação das estatísticas e relatórios técnicos.\nAplicação - Contém histórico de ações e aplicações dos projetos."
  },
  {
    "objectID": "posts/welcome/index.html#como-será-divido-cada-post",
    "href": "posts/welcome/index.html#como-será-divido-cada-post",
    "title": "Motivação para o blog",
    "section": "Como será divido cada post ?",
    "text": "Como será divido cada post ?\nEm 2001 para facilitar o entendimento dos profissionais da operação em industria eu escolhi um padrão que ao longo do tempo vem se mostrando eficiente e utilizarei aqui.\n\nO que é : qual a ideia do que está sendo abordado ?\nQual o objetivo : por que isso está sendo ou foi desenvolvido ?\nDe onde vem : quais as necessidades ou origem dessa demanda ? A motivação ?\nComo fazer : qual o procedimento, código, sequência ou fluxo ?\nPra onde vai : quem é o consumidor disso ? Qual a aplicação prática ?\nQual o resultado : descrição dos resultados previstos ou comprovados.\n\nReferencia: Transição demográfica Brasil e Japão"
  },
  {
    "objectID": "about.html#education",
    "href": "about.html#education",
    "title": "Sobre",
    "section": "Education",
    "text": "Education\n**Massachusetts Institute of Technology** | Cambridge, MA\nPh.D. in Computer Science | September 2009 - May 2014\n**The University of California, Berkeley** | Berkeley, CA\nB.S. in Computer Science | September 2005 - May 2009"
  },
  {
    "objectID": "about.html#experience",
    "href": "about.html#experience",
    "title": "Sobre",
    "section": "Experience",
    "text": "Experience\n**Google Brain** | Principal Investigator | January 2018 - Present\n**Netflix** | Research Scientist | June 2014 - December 2017"
  },
  {
    "objectID": "posts/post-with-code/index.html#qual-o-objetivo",
    "href": "posts/post-with-code/index.html#qual-o-objetivo",
    "title": "Avaliar resultados de modelo preditivo com matriz de confusão",
    "section": "Qual o objetivo",
    "text": "Qual o objetivo\n\nPor ser visual ajuda a responder rapidamente será que meu modelo teve um bom desempenho, onde deu errado, como posso corrigir ?\nAs diversas saídas de previõe permite a criação de indicadores que serão uteis nos ajustes mais adequados conforme a necessidade do trabalho que está sendo desenvolvido."
  },
  {
    "objectID": "posts/post-with-code/index.html#de-onde-vem-a-demanda",
    "href": "posts/post-with-code/index.html#de-onde-vem-a-demanda",
    "title": "Avaliar resultados de modelo preditivo com matriz de confusão",
    "section": "De onde vem a demanda",
    "text": "De onde vem a demanda\n\nEm 1904 Karl Pearson criou a tabela de contingência. Por que precisamos e uma matriz de confusao se tevem a acuracidade ?\nImagine prever quantas pessoas estao infectadas com um virus contagioso antes de apresentar sintomas e isola-las da populacao saudavel."
  },
  {
    "objectID": "posts/post-with-code/index.html#como-fazer",
    "href": "posts/post-with-code/index.html#como-fazer",
    "title": "Avaliar resultados de modelo preditivo com matriz de confusão",
    "section": "Como fazer",
    "text": "Como fazer\n\nlibrary(tidyverse)\nlibrary(tidymodels)\n\ntwo_class_example %>% filter(Class1 >0.5) %>% janitor::tabyl(truth)\n\n  truth   n   percent\n Class1 227 0.8194946\n Class2  50 0.1805054\n\ntwo_class_example %>% \n  janitor::tabyl(truth, predicted) %>% \n  janitor::adorn_totals(where = c(\"col\", \"row\")) %>% \n  janitor::adorn_title()\n\n        predicted             \n  truth    Class1 Class2 Total\n Class1       227     31   258\n Class2        50    192   242\n  Total       277    223   500\n\ntwo_class_example %>% \n  conf_mat(truth =truth, estimate =predicted, dnn =c(\"vlr_previsto\",\"vlr_real\"))\n\n            vlr_real\nvlr_previsto Class1 Class2\n      Class1    227     50\n      Class2     31    192\n\ntwo_class_example %>% \n  conf_mat(truth = truth, estimate = predicted) %>% \n  autoplot(type = \"heatmap\")\n\n\n\n#acuracia- prop de acertos do modelo total de acerto / total previu\ntwo_class_example %>% \n  accuracy(truth= truth, estimate = predicted)\n\n# A tibble: 1 × 3\n  .metric  .estimator .estimate\n  <chr>    <chr>          <dbl>\n1 accuracy binary         0.838\n\n#sensibilidade chamada de recall. é a proporção de casos positivos que foram\n#identificados corretamente\n#Raio X de aeroporto prioriza sensitivity, diagnóstico de cancer\n#O não diagnóstico resulta em atraso no tratamento\n#mas um falso positivo resulta em ansiedade e testes invasivos como a biopsia\ntwo_class_example %>% \n  yardstick::sens(truth= truth, estimate = predicted)\n\n# A tibble: 1 × 3\n  .metric .estimator .estimate\n  <chr>   <chr>          <dbl>\n1 sens    binary         0.880\n\n#Recall é uma métrica útil nos casos em que o Falso Negativo supera o falso positivol\n#é importante em casos médicos em que não importa se disparamos um alarme \n#falso, mas os casos positivos reais não devem passar despercebidos!\n#Em nosso exemplo, Recall seria uma métrica melhor porque não queremos dar alta \n#acidentalmente a uma pessoa infectada e deixá-la se misturar com a população \n#saudável,espalhando o vírus contagioso. \n#Agora você pode entender por que a acuracidade foi uma métrica ruim para modelo.\n\ntwo_class_example %>% \n  yardstick::recall(truth= truth, estimate = predicted)\n\n# A tibble: 1 × 3\n  .metric .estimator .estimate\n  <chr>   <chr>          <dbl>\n1 recall  binary         0.880\n\ntwo_class_example %>% \n  yardstick::kap(truth= truth, estimate = predicted)\n\n# A tibble: 1 × 3\n  .metric .estimator .estimate\n  <chr>   <chr>          <dbl>\n1 kap     binary         0.675\n\ntwo_class_example %>% \n  yardstick::npv(truth= truth, estimate = predicted)\n\n# A tibble: 1 × 3\n  .metric .estimator .estimate\n  <chr>   <chr>          <dbl>\n1 npv     binary         0.861\n\ntwo_class_example %>% \n  yardstick::ppv(truth= truth, estimate = predicted)\n\n# A tibble: 1 × 3\n  .metric .estimator .estimate\n  <chr>   <chr>          <dbl>\n1 ppv     binary         0.819\n\n#A precisão é util nos casos em que os falsos positivos são uma preocupação \n#maior do que os falsos negativos.\n#A precisão é importante em sistemas de recomendação de música ou vídeo, \n#sites de comércio eletrônico, etc. Resultados errados podem levar à perda de \n#clientes e prejudicar o negócio.\ntwo_class_example %>% \n  yardstick::precision(truth= truth, estimate = predicted)\n\n# A tibble: 1 × 3\n  .metric   .estimator .estimate\n  <chr>     <chr>          <dbl>\n1 precision binary         0.819\n\ntwo_class_example %>% \n  yardstick::spec(truth= truth, estimate = predicted)\n\n# A tibble: 1 × 3\n  .metric .estimator .estimate\n  <chr>   <chr>          <dbl>\n1 spec    binary         0.793\n\ntwo_class_example %>% \n  roc_curve(truth = truth, estimate = Class1 ) %>% autoplot()\n\n\n\ntwo_class_example %>% \n  roc_auc(truth = truth, estimate = Class1 )\n\n# A tibble: 1 × 3\n  .metric .estimator .estimate\n  <chr>   <chr>          <dbl>\n1 roc_auc binary         0.939\n\n\n\n\n\n\n\n\nDiferença entre incidência e prevalencia\n\n\n\nIncidencia é o número de casos recém-diagnosticados de uma doença. Número de novos casos de uma doença dividido pelo número de pessoas em risco para a doença. Se, ao longo de um ano, cinco mulheres são diagnosticadas com câncer de mama, de uma população total de 200 mulheres do estudo (que não têm câncer de mama no início do período de estudo), então diríamos que a incidência de câncer de mama câncer nesta população foi de 0,025. (ou 2.500 por 100.000 mulheres-anos de estudo)\nPrevalência é o número total de casos da doença existentes em uma população. A taxa de prevalência é o número total de casos de uma doença existente em uma população dividido pela população total. Assim, se uma medida de câncer é feita em uma população de 40.000 pessoas e 1.200 foram recentemente diagnosticadas com câncer e 3.500 estão vivendo com câncer, então a prevalência de câncer é de 0,118. (ou 11.750 por 100.000 pessoas)"
  },
  {
    "objectID": "posts/post-with-code/index.html#pra-onde-vai-quem-é-o-cliente",
    "href": "posts/post-with-code/index.html#pra-onde-vai-quem-é-o-cliente",
    "title": "Avaliar resultados de modelo preditivo com matriz de confusão",
    "section": "Pra onde vai quem é o cliente",
    "text": "Pra onde vai quem é o cliente\n- A próxima etapa é o ajuste, finalização e comunicação do modelo."
  },
  {
    "objectID": "posts/post-with-code/index.html#qual-o-resultado",
    "href": "posts/post-with-code/index.html#qual-o-resultado",
    "title": "Avaliar resultados de modelo preditivo com matriz de confusão",
    "section": "Qual o resultado",
    "text": "Qual o resultado\n- Aperfeiçoar\n- Facilitar\n- Melhorar"
  },
  {
    "objectID": "posts/post-with-code/index.html#diferença-entre-incidência-e-prevalencia",
    "href": "posts/post-with-code/index.html#diferença-entre-incidência-e-prevalencia",
    "title": "Avaliar resultados de modelo preditivo com matriz de confusão",
    "section": "Diferença entre incidência e prevalencia",
    "text": "Diferença entre incidência e prevalencia\nIncidencia é o número de casos recém-diagnosticados de uma doença. Número de novos casos de uma doença dividido pelo número de pessoas em risco para a doença. Se, ao longo de um ano, cinco mulheres são diagnosticadas com câncer de mama, de uma população total de 200 mulheres do estudo (que não têm câncer de mama no início do período de estudo), então diríamos que a incidência de câncer de mama câncer nesta população foi de 0,025. (ou 2.500 por 100.000 mulheres-anos de estudo)\nPrevalência é o número total de casos da doença existentes em uma população. A taxa de prevalência é o número total de casos de uma doença existente em uma população dividido pela população total. Assim, se uma medida de câncer é feita em uma população de 40.000 pessoas e 1.200 foram recentemente diagnosticadas com câncer e 3.500 estão vivendo com câncer, então a prevalência de câncer é de 0,118. (ou 11.750 por 100.000 pessoas) :::\n\nPra onde vai quem é o cliente\n\nA próxima etapa é o ajuste, finalização e comunicação do modelo.\n\n\n\nQual o resultado\n\nAperfeiçoar as técnicas de avaliação de performance de modelos poupando tempo e dinheiro.\nFacilitar o processo de busca por melhorias nos modelos de previsão.\nMelhorar a comunicação dos resultados."
  },
  {
    "objectID": "blog.html",
    "href": "blog.html",
    "title": "carvalho ribeiro blog",
    "section": "",
    "text": "Modelos\n\n\n\n\n\n\n\n\n\n\n\nAug 3, 2022\n\n\nMarcelo Carvalho dos Anjos\n\n\n\n\n\n\n  \n\n\n\n\n\n\n\n\n\n\nDemanda\n\n\nDados\n\n\nFerramentas\n\n\nExploração\n\n\nModelos\n\n\nVersionamento\n\n\nComunicação\n\n\nAplicação\n\n\n\n\n\n\n\n\n\n\n\nAug 3, 2022\n\n\nMarcelo Carvalho dos Anjos\n\n\n\n\n\n\nNo matching items"
  },
  {
    "objectID": "posts/dummy-post/post.html",
    "href": "posts/dummy-post/post.html",
    "title": "This is a dummy blog posts",
    "section": "",
    "text": "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam suscipit est nec dui eleifend, at dictum elit ullamcorper. Aliquam feugiat dictum bibendum. Praesent fermentum laoreet quam, cursus volutpat odio dapibus in. Fusce luctus porttitor vehicula. Donec ac tortor nisi. Donec at lectus tortor. Morbi tempor, nibh non euismod viverra, metus arcu aliquet elit, sed fringilla urna leo vel purus.\n\n\nLorem ipsum dolor sit amet, consectetur adipiscing elit. Nam suscipit est nec dui eleifend, at dictum elit ullamcorper. Aliquam feugiat dictum bibendum. Praesent fermentum laoreet quam, cursus volutpat odio dapibus in. Fusce luctus porttitor vehicula. Donec ac tortor nisi. Donec at lectus tortor. Morbi tempor, nibh non euismod viverra, metus arcu aliquet elit, sed fringilla urna leo vel purus.\n\n\nThis is inline code plus a small code chunk.\n\nlibrary(tidyverse)\nggplot(mpg) +\n  geom_jitter(aes(cty, hwy), size = 4, alpha = 0.5) \n\n\n\n\n\n\n\n\n\n\n\nTransforming OLS estimatesMaximizing likelihood\n\n\n\n\nCode\npreds_lm %>% \n  ggplot(aes(body_mass_g, bill_length_mm, col = correct)) +\n  geom_jitter(size = 4, alpha = 0.6) +\n  facet_wrap(vars(species)) +\n  scale_color_manual(values = c('grey60', thematic::okabe_ito(3)[3])) +\n  scale_x_continuous(breaks = seq(3000, 6000, 1000)) +\n  theme_minimal(base_size = 12) +\n  theme(\n    legend.position = 'top', \n    panel.background = element_rect(color = 'black'),\n    panel.grid.minor = element_blank()\n  ) +\n  labs(\n    x = 'Body mass (in g)',\n    y = 'Bill length (in mm)'\n  )\n\n\n\n\n\n\n\n\n\nCode\nglm.mod <- glm(sex ~ body_mass_g + bill_length_mm + species, family = binomial, data = dat)\npreds <- dat %>% \n  mutate(\n    prob.fit = glm.mod$fitted.values,\n    prediction = if_else(prob.fit > 0.5, 'male', 'female'),\n    correct = if_else(sex == prediction, 'correct', 'incorrect')\n  )\npreds %>% \n  ggplot(aes(body_mass_g, bill_length_mm, col = correct)) +\n  geom_jitter(size = 4, alpha = 0.6) +\n  facet_wrap(vars(species)) +\n  scale_x_continuous(breaks = seq(3000, 6000, 1000)) +\n  scale_color_manual(values = c('grey60', thematic::okabe_ito(3)[3])) +\n  theme_minimal(base_size = 10) +\n  theme(\n    legend.position = 'top', \n    panel.background = element_rect(color = 'black'),\n    panel.grid.minor = element_blank()\n  ) +\n  labs(\n    x = 'Body mass (in g)',\n    y = 'Bill length (in mm)'\n  )\n\n\n\n\n\n\n\n\n\n\n\\[\n\\int_0^1 f(x) \\ dx\n\\]\n\n\n\n\n\n\n\n\ngeom_density(\n  mapping = NULL,\n  data = NULL,\n  stat = \"density\",\n  position = \"identity\",\n  ...,\n  na.rm = FALSE,\n  orientation = NA,\n  show.legend = NA,\n  inherit.aes = TRUE,\n  outline.type = \"upper\"\n)\n\n\nstat_density(\n  mapping = NULL,\n  data = NULL,\n  geom = \"area\",\n  position = \"stack\",\n  ...,\n  bw = \"nrd0\",\n  adjust = 1,\n  kernel = \"gaussian\",\n  n = 512,\n  trim = FALSE,\n  na.rm = FALSE,\n  orientation = NA,\n  show.legend = NA,\n  inherit.aes = TRUE\n)\n\n\n\n\n\n\n#| fig-cap: “Bla bla bla. This is a caption in the margin. Super cool isn’t it?” #| fig-cap-location: margin ggplot(data = gapminder::gapminder, mapping = aes(x = lifeExp, fill = continent)) + stat_density(position = “identity”, alpha = 0.5)"
  },
  {
    "objectID": "posts/confusion-matrix/index.html",
    "href": "posts/confusion-matrix/index.html",
    "title": "Avaliar resultados de modelo preditivo com matriz de confusão",
    "section": "",
    "text": "Qual o objetivo\n\nPor ser visual ajuda a responder rapidamente será que meu modelo teve um bom desempenho, onde deu errado, como posso corrigir ?\nAs diversas saídas de previõe permite a criação de indicadores que serão uteis nos ajustes mais adequados conforme a necessidade do trabalho que está sendo desenvolvido.\n\n\n\nDe onde vem a demanda\n\nEm 1904 Karl Pearson criou a tabela de contingência. Por que precisamos e uma matriz de confusao se tevem a acuracidade ?\nImagine prever quantas pessoas estao infectadas com um virus contagioso antes de apresentar sintomas e isola-las da populacao saudavel.\n\n\n\nComo fazer\nPara reproduzir os códigos abaixo serão necessários os pacotes tidyverse , tidymodels e janitor\nO principal pacote que será usando para analisar uma matriz de confusão é o pacote yardstick que já é carregado quando chamamos o pacote tidymodels.\n\n#packages\nlibrary(tidyverse)\nlibrary(tidymodels)\n\n#check\ntwo_class_example %>% filter(Class1 >0.5) %>% janitor::tabyl(truth)\n\n  truth   n   percent\n Class1 227 0.8194946\n Class2  50 0.1805054\n\n#exemplo de tabela cruzada usando janitor\ntwo_class_example %>% \n  janitor::tabyl(truth, predicted) %>% \n  janitor::adorn_totals(where = c(\"col\", \"row\")) %>% \n  janitor::adorn_title()\n\n        predicted             \n  truth    Class1 Class2 Total\n Class1       227     31   258\n Class2        50    192   242\n  Total       277    223   500\n\n#trocando nomes\ntwo_class_example %>% \n  conf_mat(truth =truth, estimate =predicted, dnn =c(\"vlr_previsto\",\"vlr_real\"))\n\n            vlr_real\nvlr_previsto Class1 Class2\n      Class1    227     50\n      Class2     31    192\n\n#plot heatmap\ntwo_class_example %>% \n  conf_mat(truth = truth, estimate = predicted) %>% \n  autoplot(type = \"heatmap\")\n\n\n\n#acuracia- prop de acertos do modelo total de acerto / total previu\ntwo_class_example %>% \n  accuracy(truth= truth, estimate = predicted)\n\n# A tibble: 1 × 3\n  .metric  .estimator .estimate\n  <chr>    <chr>          <dbl>\n1 accuracy binary         0.838\n\n#sensibilidade ou recall é a proporção de casos positivos classif corretamente\n#Raio X de aeroporto prioriza sensitivity\n#diagnóstico de cancer também pois o não diagnóstico resulta em atraso no tratamento\ntwo_class_example %>% \n  yardstick::sens(truth= truth, estimate = predicted)\n\n# A tibble: 1 × 3\n  .metric .estimator .estimate\n  <chr>   <chr>          <dbl>\n1 sens    binary         0.880\n\n#Recall métrica útil nos casos em que o Falso Negativo supera o falso positivol\n#importante em casos médicos em que não importa se disparamos um alarme \n#falso, mas os casos positivos reais não devem passar despercebidos!\n#Em nosso exemplo, Recall seria uma métrica melhor porque não queremos dar alta \n#acidentalmente a uma pessoa infectada e deixá-la se misturar com a população \n#saudável,espalhando o vírus contagioso. \n#Agora você pode entender por que a acuracidade foi uma métrica ruim para modelo.\ntwo_class_example %>% \n  yardstick::recall(truth= truth, estimate = predicted)\n\n# A tibble: 1 × 3\n  .metric .estimator .estimate\n  <chr>   <chr>          <dbl>\n1 recall  binary         0.880\n\n#kappa\ntwo_class_example %>% \n  yardstick::kap(truth= truth, estimate = predicted)\n\n# A tibble: 1 × 3\n  .metric .estimator .estimate\n  <chr>   <chr>          <dbl>\n1 kap     binary         0.675\n\n#npv\ntwo_class_example %>% \n  yardstick::npv(truth= truth, estimate = predicted)\n\n# A tibble: 1 × 3\n  .metric .estimator .estimate\n  <chr>   <chr>          <dbl>\n1 npv     binary         0.861\n\n#ppv\ntwo_class_example %>% \n  yardstick::ppv(truth= truth, estimate = predicted)\n\n# A tibble: 1 × 3\n  .metric .estimator .estimate\n  <chr>   <chr>          <dbl>\n1 ppv     binary         0.819\n\n#A precisão é util nos casos em que os falsos positivos são uma preocupação \n#maior do que os falsos negativos.\n#A precisão é importante em sistemas de recomendação de música ou vídeo, \n#sites de comércio eletrônico, etc. Resultados errados podem levar à perda de \n#clientes e prejudicar o negócio.\ntwo_class_example %>% \n  yardstick::precision(truth= truth, estimate = predicted)\n\n# A tibble: 1 × 3\n  .metric   .estimator .estimate\n  <chr>     <chr>          <dbl>\n1 precision binary         0.819\n\n#spec\ntwo_class_example %>% \n  yardstick::spec(truth= truth, estimate = predicted)\n\n# A tibble: 1 × 3\n  .metric .estimator .estimate\n  <chr>   <chr>          <dbl>\n1 spec    binary         0.793\n\n#roc_curve\ntwo_class_example %>% \n  roc_curve(truth = truth, estimate = Class1 ) %>% autoplot()\n\n\n\n#roc_auc\ntwo_class_example %>% \n  roc_auc(truth = truth, estimate = Class1 )\n\n# A tibble: 1 × 3\n  .metric .estimator .estimate\n  <chr>   <chr>          <dbl>\n1 roc_auc binary         0.939\n\n\n\n\n\n\n\n\nDiferença entre incidência e prevalencia\n\n\n\n\n\nIncidencia é o número de casos recém-diagnosticados de uma doença. Número de novos casos de uma doença dividido pelo número de pessoas em risco para a doença. Se, ao longo de um ano, cinco mulheres são diagnosticadas com câncer de mama, de uma população total de 200 mulheres do estudo (que não têm câncer de mama no início do período de estudo), então diríamos que a incidência de câncer de mama câncer nesta população foi de 0,025. (ou 2.500 por 100.000 mulheres-anos de estudo)\nPrevalência é o número total de casos da doença existentes em uma população. A taxa de prevalência é o número total de casos de uma doença existente em uma população dividido pela população total. Assim, se uma medida de câncer é feita em uma população de 40.000 pessoas e 1.200 foram recentemente diagnosticadas com câncer e 3.500 estão vivendo com câncer, então a prevalência de câncer é de 0,118. (ou 11.750 por 100.000 pessoas)\n\n\n\n\n\nPra onde vai quem é o cliente\n\nA próxima etapa é o ajuste, finalização e comunicação do modelo.\n\n\n\nQual o resultado\n\nAperfeiçoar as técnicas de avaliação de performance de modelos poupando tempo e dinheiro.\nFacilitar o processo de busca por melhorias nos modelos de previsão.\nMelhorar a comunicação dos resultados."
  }
]